---
- name: debian | Remove Debian version
  apt:
    name: "{{ netdata_debian_del_pkgs }}"
    state: absent
  become: true
  when: not is_netdata_repo_installed.stat.exists

- name: debian | Install Dependencies
  apt:
    name: "{{ netdata_debian_deps }}"
    state: present
    update_cache: true
  become: true
  when: netdata_debian_deps is defined and netdata_debian_deps

- name: debian | Install Netdata
  apt:
    name: "{{ netdata_debian_pkgs }}"
    state: "{{ netdata_debian_pkgs_state }}"
  become: true
  notify: restart netdata

- name: debian | Enable Netdata
  systemd:
    name: netdata
    masked: no
